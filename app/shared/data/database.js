"use strict";
var core_1 = require("@angular/core");
var nativescript_couchbase_1 = require("nativescript-couchbase");
core_1.Injectable();
var Database = (function () {
    /*
    private pull: any;
    private push: any;
    */
    function Database() {
        if (!this.isInstantiated) {
            this.storage = new nativescript_couchbase_1.Couchbase("caregiver");
            this.storage.createView("data", "1", function (document, emitter) {
                if (document.type == "data") {
                    emitter.emit(document._id, document);
                }
            });
            this.storage.createView("user", "1", function (document, emitter) {
                if (document.type == "user") {
                    emitter.emit(document._id, document);
                }
            });
            this.isInstantiated = true;
        }
    }
    Database.prototype.getDatabase = function () {
        return this.storage;
    };
    return Database;
}());
exports.Database = Database;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YWJhc2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkYXRhYmFzZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsc0NBQTJDO0FBQzNDLGlFQUFtRDtBQUVuRCxpQkFBVSxFQUFFLENBQUE7QUFDWjtJQUdJOzs7TUFHRTtJQUNGO1FBQ0ksRUFBRSxDQUFBLENBQUMsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztZQUV0QixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksa0NBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUMxQyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLFVBQUMsUUFBUSxFQUFFLE9BQU87Z0JBQ25ELEVBQUUsQ0FBQSxDQUFDLFFBQVEsQ0FBQyxJQUFJLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQztvQkFDekIsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO2dCQUN6QyxDQUFDO1lBQ0wsQ0FBQyxDQUFDLENBQUM7WUFDSCxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLFVBQUMsUUFBUSxFQUFFLE9BQU87Z0JBQ25ELEVBQUUsQ0FBQSxDQUFDLFFBQVEsQ0FBQyxJQUFJLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQztvQkFDekIsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO2dCQUN6QyxDQUFDO1lBQ0wsQ0FBQyxDQUFDLENBQUM7WUFFSCxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztRQUMvQixDQUFDO0lBQ0wsQ0FBQztJQUNNLDhCQUFXLEdBQWxCO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDeEIsQ0FBQztJQWtCTCxlQUFDO0FBQUQsQ0FBQyxBQTdDRCxJQTZDQztBQTdDWSw0QkFBUSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xyXG5pbXBvcnQgeyBDb3VjaGJhc2UgfSBmcm9tIFwibmF0aXZlc2NyaXB0LWNvdWNoYmFzZVwiO1xyXG5cclxuSW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBEYXRhYmFzZSB7XHJcbiAgICBwcml2YXRlIHN0b3JhZ2U6IGFueTtcclxuICAgIHByaXZhdGUgaXNJbnN0YW50aWF0ZWQ6IGJvb2xlYW47XHJcbiAgICAvKlxyXG4gICAgcHJpdmF0ZSBwdWxsOiBhbnk7XHJcbiAgICBwcml2YXRlIHB1c2g6IGFueTtcclxuICAgICovIFxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIGlmKCF0aGlzLmlzSW5zdGFudGlhdGVkKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UgPSBuZXcgQ291Y2hiYXNlKFwiY2FyZWdpdmVyXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UuY3JlYXRlVmlldyhcImRhdGFcIiwgXCIxXCIsIChkb2N1bWVudCwgZW1pdHRlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYoZG9jdW1lbnQudHlwZSA9PSBcImRhdGFcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtaXR0ZXIuZW1pdChkb2N1bWVudC5faWQsIGRvY3VtZW50KTtcclxuICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UuY3JlYXRlVmlldyhcInVzZXJcIiwgXCIxXCIsIChkb2N1bWVudCwgZW1pdHRlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYoZG9jdW1lbnQudHlwZSA9PSBcInVzZXJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtaXR0ZXIuZW1pdChkb2N1bWVudC5faWQsIGRvY3VtZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuaXNJbnN0YW50aWF0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXREYXRhYmFzZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdG9yYWdlO1xyXG4gICAgfVxyXG4gICAgLypcclxuICAgICAgICBwdWJsaWMgc3RhcnRTeW5jKGNvbnRpbnVvdXM6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLnB1c2ggPSB0aGlzLnN0b3JhZ2UuY3JlYXRlUHVzaFJlcGxpY2F0aW9uKFwiaHR0cDovLzE5Mi4xNjguNTcuMTo0OTg0L3Rlc3QtZGF0YWJhc2VcIik7XHJcbiAgICAgICAgdGhpcy5wdWxsID0gdGhpcy5zdG9yYWdlLmNyZWF0ZVB1bGxSZXBsaWNhdGlvbihcImh0dHA6Ly8xOTIuMTY4LjU3LjE6NDk4NC90ZXN0LWRhdGFiYXNlXCIpO1xyXG5cclxuICAgICAgICB0aGlzLnB1c2guc2V0Q29udGludW91cyhjb250aW51b3VzKTtcclxuICAgICAgICB0aGlzLnB1bGwuc2V0Q29udGludW91cyhjb250aW51b3VzKTtcclxuXHJcbiAgICAgICAgdGhpcy5wdXNoLnN0YXJ0KCk7XHJcbiAgICAgICAgdGhpcy5wdWxsLnN0YXJ0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0b3BTeW5jKCkge1xyXG4gICAgICAgIHRoaXMucHVzaC5zdG9wKCk7XHJcbiAgICAgICAgdGhpcy5wdWxsLnN0b3AoKTtcclxuICAgIH1cclxuICAgICovXHJcbn1cclxuIl19